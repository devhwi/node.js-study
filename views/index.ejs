<% layout('layout') -%>
<style>
.write-area {
  margin-bottom: 1em;
}

.hwi-card-header {
  background-color: #fff;
}

.hwi-card-footer {
  font-size: 0.5em;
  background-color: #fff;
}
</style>

<div class="container">
  <p>
    <a href="https://github.com/devhwi/node.js-study" target="_blank">
      <i class="fa fa-github" aria-hidden="true">&nbsp; Go to Github Repository</i>
    </a>
  </p>
  <p>
    <%=user_name ? '안녕하세요. ' + user_name + '님' : ''%>
  </p>
  <h3>한줄메모</h3>
  <% if (user_name) { %>
  <div class="card card-outline-secondary mb-3 text-center">
    <div class="card-block">
      <!-- Write Area -->
      <div class="card card-outline-danger text-center write-area">
        <div class="card-block">
          <blockquote class="card-blockquote">
            <form action="">
              <div class="form-group">
                <textarea class="form-control" name="memo" id="memo" rows="3"></textarea>
              </div>
              <div class="form-group" style="margin-bottom: 0px; text-align: right">
                <button type="button" class="btn btn-primary">출석하기</button>
              </div>
            </form>
          </blockquote>
        </div>
      </div>
      <!-- End Write Area -->

      <%
        if(memo_count > 0) {
        memo_result.forEach((memo)=>{
      %>
      <!-- Attendance List -->
      <div class="card text-left">
        <div class="card-header hwi-card-header">
          <%= memo.name %>&nbsp;(<%= memo.id %>)
        </div>
        <div class="card-block">
          <p class="card-text"><%= memo['attendances'][0]['memo'] %></p>
        </div>
        <div class="card-footer text-muted hwi-card-footer">
          <%= memo['attendances'][0]['submit_date'] %> 에 작성
        </div>
      </div>
      <!-- End Attendance List -->
      <% }); %>
      <% } else { %>
      <div class="card card-outline-secondary mb-3 text-center">
        <div class="card-block">
          남겨진 메모가 없습니다.
        </div>
      </div>
      <% } %>
    </div>
  </div>
  <% } else { %>
  <div class="card card-outline-secondary mb-3 text-center">
    <div class="card-block">
      로그인이 필요합니다. 우측 상단에 로그인을 해주세요.
    </div>
  </div>
  <% } %>
</div>